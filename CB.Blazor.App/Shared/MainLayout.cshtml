@inherits BlazorLayoutComponent
@inject ICMSService CMS

<Sidebar ref="sidebar">
    <SidebarContent>
        <SidebarBrand>
            <a href="">@GlobalConfig.SiteName</a>
        </SidebarBrand>
        <SidebarNavigation>
            <SidebarLabel>@GlobalConfig.SubHeading</SidebarLabel>
            <SidebarItem>
                <SidebarLink To="portfolio" Title="Portfolio">
                    <Icon Name="IconName.Person" Margin="Margin.Is3.FromRight" />Portfolio
                </SidebarLink>
            </SidebarItem>
            <SidebarItem>
                <SidebarLink To="blog" Title="Blog">
                    <Icon Name="IconName.Dashboard" Margin="Margin.Is3.FromRight" />Blog
                </SidebarLink>
            </SidebarItem>
            <SidebarItem>
                <SidebarLink To="contact" Title="Contact Me">
                    <Icon Name="IconName.Mail" Margin="Margin.Is3.FromRight" />Contact
                </SidebarLink>
            </SidebarItem>
        </SidebarNavigation>
    </SidebarContent>
</Sidebar>

<div class="app-main">
    @Body
</div>

@functions{
    Sidebar sidebar;
    Global GlobalConfig { get; set; } = new Global();

    bool collapseNavMenu = true;

    void ToggleSidebar()
    {
        sidebar.Toggle();
    }

    protected override async Task OnInitAsync()
    {
        GlobalConfig = await CMS.GetGlobal();
    }
}